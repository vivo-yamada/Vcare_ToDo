# Vcare ToDo管理アプリケーション 要件定義書

## 1. プロジェクト概要

### 1.1 目的
チームで利用可能なToDo管理Webアプリケーションを構築し、タスクの管理と進捗状況の可視化を実現する。

### 1.2 対象ユーザー
- 社内の全従業員
- チーム単位での利用を想定

### 1.3 システム特徴
- 予定日未定のタスクと予定日決定済みタスクの管理
- ドラッグ&ドロップによる直感的な操作
- カレンダー表示による視覚的なタスク管理
- 既存データベースとの連携

## 2. 機能要件

### 2.1 認証機能
- ログイン画面の実装
- T_社員テーブルを利用したユーザー認証
- セッション管理

### 2.2 タスク管理機能

#### 2.2.1 タスクの種類
| タスク種別 | 説明 | 必須項目 |
|-----------|------|----------|
| 未定タスク | 予定日が決まっていないタスク | 内容 |
| 予定タスク | 予定日が決まったタスク | 内容、予定日 |

#### 2.2.2 タスク操作
- タスクの新規作成
- タスクの編集
- タスクの削除
- タスクの完了処理
- ドラッグ&ドロップによる予定日設定/変更

### 2.3 カレンダー機能
- 表示モード切り替え（月/週/日）
- デフォルト表示：週表示
- タスクのドラッグ&ドロップ対応
- 複数ユーザーのタスク表示（選択式）

### 2.4 チーム機能
- ユーザー選択によるタスク表示切り替え
- デフォルト：ログインユーザーのタスクのみ表示
- 複数ユーザーの同時表示対応

## 3. データベース設計

### 3.1 接続情報
| 項目 | 値 |
|------|-----|
| サーバー | 192.168.1.19\SQLEXPRESS |
| 認証方式 | SQL Server認証 |
| ユーザー名 | sa |
| パスワード | vivo0117## |
| データベース名 | VcareDB |

### 3.2 使用テーブル

#### 3.2.1 T_システム管理台帳（タスク情報）
※既存テーブルのため、実際のカラム名は要確認

#### 3.2.2 T_社員（ユーザー情報）
- ユーザー認証に使用
- 担当者選択に使用

#### 3.2.3 T_作業区分（作業分類マスタ）
- 対応方法カラムから作業分類を取得

#### 3.2.4 T_分類マスタ（報告区分マスタ）
- 有効FLG = -1のレコードから報告区分を取得
- 順番カラムでソート

### 3.3 データ項目対照表

#### T_システム管理台帳カラムマッピング

| 画面表示名 | 実際のカラム名 | データ型 | 必須 | 備考 |
|-----------|---------------|----------|------|------|
| ID | ID | decimal | ○ | 主キー（自動採番） |
| 取引先コード | 取引先コード | nvarchar(10) | × | |
| 取引先名 | 取引先名 | nvarchar(50) | × | |
| 部署コード | 部署コード | nvarchar(10) | × | |
| 部署名 | 部署名 | nvarchar(50) | × | |
| プロジェクトコード | PLANID | int | × | |
| プロジェクト名 | PlanName | nvarchar(50) | × | |
| システムコード | SYSTEMID | decimal | × | |
| システム名 | SystemName | nvarchar(35) | × | |
| 内容 | 内容 | nvarchar(255) | ○ | |
| 作業分類 | 対応方法 | nvarchar(50) | × | T_作業区分から選択 |
| 予定工数 | 見積工数 | decimal | × | |
| 実績工数 | 実績工数 | decimal | × | |
| 報告工数 | 保守工数 | decimal | × | |
| 予定日 | 作業予定日 | datetime | △ | 予定タスクは必須 |
| 作業日 | 修正完了日 | datetime | × | |
| 客先依頼者 | 起案者 | nvarchar(50) | × | |
| 担当者 | 担当者 | nvarchar(255) | × | デフォルト：ログインユーザー |
| 報告区分 | 分類 | nvarchar(20) | × | T_分類マスタから選択 |
| 備考 | 備考 | nvarchar(max) | × | |

#### T_社員カラム情報

| カラム名 | データ型 | NULL許可 | 用途 |
|---------|----------|----------|------|
| コード | nvarchar(8) | NO | ユーザーID（ログイン用） |
| 氏名 | nvarchar(45) | YES | 表示用ユーザー名 |
| メールアドレス | nvarchar(100) | YES | 通知用（将来実装） |

## 4. 非機能要件

### 4.1 技術スタック
- 開発言語：C#
- フレームワーク：ASP.NET Core MVC
- CSSフレームワーク：Bootstrap
- データベース：SQL Server（既存）
- JavaScript：標準JavaScript + jQuery（ドラッグ&ドロップ用）

### 4.2 ブラウザ対応
- Chrome（最新版）
- Edge（最新版）
- Safari（最新版）
- モバイルブラウザ対応

### 4.3 レスポンシブデザイン
- PC表示対応
- タブレット表示対応
- スマートフォン表示対応

### 4.4 パフォーマンス
- ページ読み込み：3秒以内
- タスク操作レスポンス：1秒以内

### 4.5 セキュリティ
- SQLインジェクション対策
- XSS対策
- CSRF対策
- セッションタイムアウト設定

## 5. 画面設計

### 5.1 画面構成
1. **ログイン画面**
   - ユーザーID入力
   - パスワード入力
   - ログインボタン

2. **メイン画面（ToDo管理）**
   - ヘッダー部：ユーザー情報、ログアウト
   - 上部エリア：未定タスク一覧
   - 下部エリア：カレンダー表示
   - サイドバー：ユーザー選択、表示切替

3. **タスク詳細画面（モーダル）**
   - 全項目の入力フォーム
   - 保存/キャンセルボタン

### 5.2 UI仕様
- ドラッグ&ドロップ操作の視覚的フィードバック
- タスクカードのカラーコーディング（ステータス別）
- レスポンシブグリッドレイアウト

## 6. 開発フェーズ

### Phase 1：基本機能（優先実装）
1. ログイン機能
2. タスクCRUD機能
3. カレンダー表示（週表示）
4. ドラッグ&ドロップ機能

### Phase 2：拡張機能
1. 月/日表示切替
2. チーム機能（複数ユーザー表示）
3. データ連携強化

### Phase 3：追加機能（後日実装）
1. 検索機能
2. フィルタリング機能
3. レポート機能

## 7. テスト要件

### 7.1 単体テスト
- 各CRUD操作の動作確認
- バリデーション処理の確認

### 7.2 結合テスト
- DB接続テスト
- 画面遷移テスト
- ドラッグ&ドロップ操作テスト

### 7.3 ユーザビリティテスト
- スマートフォンでの操作確認
- 複数ブラウザでの表示確認

## 8. 制約事項
- 既存DBのテーブル構造は変更不可
- ローカルサーバー環境での動作
- 管理者権限の区別は実装しない

## 9. 今後の拡張予定
- 検索・フィルタリング機能
- 通知機能
- レポート出力機能
- API連携

## 10. リスクと対策

| リスク | 影響度 | 対策 |
|--------|--------|------|
| 既存DBとの連携不具合 | 高 | 事前のカラム名確認、テスト環境での検証 |
| パフォーマンス問題 | 中 | インデックス最適化、ページング実装 |
| モバイル操作性 | 中 | タッチ操作の最適化、UIの簡略化 |

## 改訂履歴

| 版 | 日付 | 改訂内容 | 作成者 |
|----|------|----------|--------|
| 1.0 | 2025-10-05 | 初版作成 | Claude |